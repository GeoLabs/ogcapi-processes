<?xml version="1.0" encoding="UTF-8"?>
<ogc-standard xmlns="https://www.metanorma.org/ns/ogc" type="semantic" version="2.6.6" schema-version="v1.4.0">
<bibdata type="standard">
<title language="en" format="text/plain">OGC API - Processes - Part 4: Job Management</title>
<docidentifier type="ogc-external">http://www.opengis.net/doc/IS/ogcapi-processes-4/1.0</docidentifier><docidentifier type="ogc-internal" primary="true">24-051</docidentifier><docnumber>24-051</docnumber><date type="published"><on>yyyy-mm-dd</on></date><date type="issued"><on>yyyy-mm-dd</on></date><date type="received"><on>yyyy-mm-dd</on></date><contributor><role type="author"/><organization>
<name>Geolabs</name>
</organization></contributor><contributor><role type="author"/><organization>
<name>Terradue Srl.</name>
</organization></contributor><contributor><role type="author"/><organization>
<name>Computer Research Institute of Montréal (CRIM).</name>
</organization></contributor><contributor><role type="editor"/><person>
<name><completename>Gérald Fenoy</completename></name>
</person></contributor><contributor><role type="publisher"/><organization>
<name>Open Geospatial Consortium</name>
<abbreviation>OGC</abbreviation></organization></contributor><edition>1.0</edition><language>en</language><script>Latn</script><abstract><p>OGC API Standards define modular API building blocks to spatially enable Web APIs in a consistent way. The <eref type="inline" bibitemid="OpenAPI-Spec" citeas="OpenAPI Specification 3.0.2">OpenAPI specification</eref> is used to define the API building blocks.</p>

<p>The OGC API Processes Standard (aka Processes API) defines API building blocks to describe, execute, monitor and retrieve results of Web-accessible processes. OGC API Processes is comprised of multiple parts, each of them is a separate OGC Standard.</p>

<p>The OGC API - Processes - Part 2: Deploy, Replace, Undeploy draft specification extends the core capabilities specified in OGC API - Processes - Part 1: Core [<eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2"/>] with the ability to dynamically add, modify and/or delete individual processes using an implementation (endpoint) of the OGC API - Processes Standard.</p>

<p>The OGC API - Processes - Part 3: Workflows draft specification extends the core capabilities specified in OGC API - Processes - Part 1: Core [<eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2"/>] with the ability to …​</p>

<p>The OGC API - Processes - Part 4: Job Management draft specification extends the core capabilities specified in OGC API - Processes - Part 1: Core [<eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2"/>] with the ability to create, manage and monitor jobs that are associated with processes execution. This part of the standard also defines how to ensure provenance information is preserved and findable.</p>

<admonition type="caution"><p>This is a DRAFT version of the 4th part of the OGC API - Processes standards. This draft is not complete and there are open issues that are still under discussion.</p>
</admonition></abstract><status><stage>draft</stage></status><copyright><from>2019</from><owner><organization>
<name>Open Geospatial Consortium</name>
<abbreviation>OGC</abbreviation></organization></owner></copyright><keyword>process</keyword><keyword>instance</keyword><keyword>spatial</keyword><keyword>data</keyword><keyword>openapi</keyword><keyword>job</keyword><keyword>create</keyword><keyword>update</keyword><keyword>delete</keyword><keyword>add</keyword><keyword>remove</keyword><keyword>REST</keyword><keyword>PATCH</keyword><keyword>POST</keyword><keyword>DELETE</keyword><ext><doctype>standard</doctype><subdoctype>implementation</subdoctype><flavor>ogc</flavor></ext></bibdata><metanorma-extension><presentation-metadata><name>color-admonition-caution</name><value>rgb(79, 129, 189)</value></presentation-metadata><presentation-metadata><name>color-admonition-editor</name><value>rgb(79, 129, 189)</value></presentation-metadata><presentation-metadata><name>color-admonition-important</name><value>rgb(79, 129, 189)</value></presentation-metadata><presentation-metadata><name>color-admonition-note</name><value>rgb(79, 129, 189)</value></presentation-metadata><presentation-metadata><name>color-admonition-safety-precaution</name><value>rgb(79, 129, 189)</value></presentation-metadata><presentation-metadata><name>color-admonition-tip</name><value>rgb(79, 129, 189)</value></presentation-metadata><presentation-metadata><name>color-admonition-todo</name><value>rgb(79, 129, 189)</value></presentation-metadata><presentation-metadata><name>color-admonition-warning</name><value>rgb(79, 129, 189)</value></presentation-metadata><presentation-metadata><name>color-background-definition-description</name><value>rgb(242, 251, 255)</value></presentation-metadata><presentation-metadata><name>color-background-definition-term</name><value>rgb(215, 243, 255)</value></presentation-metadata><presentation-metadata><name>color-background-page</name><value>rgb(33, 55, 92)</value></presentation-metadata><presentation-metadata><name>color-background-table-header</name><value>rgb(33, 55, 92)</value></presentation-metadata><presentation-metadata><name>color-background-table-row-even</name><value>rgb(252, 246, 222)</value></presentation-metadata><presentation-metadata><name>color-background-table-row-odd</name><value>rgb(254, 252, 245)</value></presentation-metadata><presentation-metadata><name>color-background-term-admitted-label</name><value>rgb(223, 236, 249)</value></presentation-metadata><presentation-metadata><name>color-background-term-deprecated-label</name><value>rgb(237, 237, 238)</value></presentation-metadata><presentation-metadata><name>color-background-term-preferred-label</name><value>rgb(249, 235, 187)</value></presentation-metadata><presentation-metadata><name>color-background-text-label-legacy</name><value>rgb(33, 60, 107)</value></presentation-metadata><presentation-metadata><name>color-secondary-shade-1</name><value>rgb(237, 193, 35)</value></presentation-metadata><presentation-metadata><name>color-secondary-shade-2</name><value>rgb(246, 223, 140)</value></presentation-metadata><presentation-metadata><name>color-text</name><value>rgb(88, 89, 91)</value></presentation-metadata><presentation-metadata><name>color-text-title</name><value>rgb(33, 55, 92)</value></presentation-metadata><table id="_misccontainer_anchor_aliases"><tbody><tr><th>ats_jm</th><td>http://www.opengis.net/spec/ogcapi-processes-4/1.0/conf/job-management</td></tr><tr><th>_e4f811aa-f7f8-48f8-bbf1-7c65f9501ef1</th><td>/conf/dru/deploy/post-op</td></tr><tr><th>ats_jm_deploy_post-op</th><td>/conf/jm/create/post-op</td></tr></tbody></table><presentation-metadata><name>TOC Heading Levels</name><value>2</value></presentation-metadata><presentation-metadata><name>HTML TOC Heading Levels</name><value>2</value></presentation-metadata><presentation-metadata><name>DOC TOC Heading Levels</name><value>2</value></presentation-metadata><presentation-metadata><name>PDF TOC Heading Levels</name><value>2</value></presentation-metadata></metanorma-extension>
<boilerplate><copyright-statement>

<clause id="_copyright_notice" obligation="normative">
<title>Copyright notice</title>
<p id="_b4a0191a-6824-1f33-66b1-2183d2dbf5a5" align="center">Copyright © 2019 Open Geospatial Consortium<br/> To obtain additional rights of use, visit<link target="https://www.ogc.org/legal"/></p>
</clause>

<clause id="_note" obligation="normative">
<title>Note</title>
<p id="_11e88dba-9912-1a89-a82d-7291bf232191" align="left">Attention is drawn to the possibility that some of the elements of this document may be the subject of patent rights. The Open Geospatial Consortium shall not be held responsible for identifying any or all such patent rights.</p>

<p id="_15067213-c07b-cba0-7e18-395ab2e00ab3" align="left">Recipients of this document are requested to submit, with their comments, notification of any relevant patent claims or other intellectual property rights of which they may be aware that might be infringed by any implementation of the standard set forth in this document, and to provide supporting documentation.</p>
</clause>
</copyright-statement>

<license-statement>

<clause id="_license_agreement" obligation="normative">
<title>License Agreement</title>
<p id="_f5fe34fd-12e2-2bb7-8cd6-9d4cffa96538">Use of this document is subject to the license agreement at <link target="https://www.ogc.org/license"/></p>
</clause>
</license-statement>

<legal-statement>

<clause id="_notice_for_drafts" obligation="normative">
<title>Notice for Drafts</title>
<p id="_09caafd2-d047-3050-9095-b3f182faf86f">This document is not an OGC Standard. This document is distributed for review and comment. This document is subject to change without notice and may not be referred to as an OGC Standard.</p>

<p id="_d80fd0eb-fbfd-dec3-0ddb-92472f4d5fcf">Recipients of this document are invited to submit, with their comments, notification of any relevant patent rights of which they are aware and to provide supporting documentation.</p>
</clause>
</legal-statement>

<feedback-statement>

<clause id="boilerplate-standard-feedback" obligation="normative">
<p id="_bb5602d2-6eb1-e557-e221-499759fe237f">Suggested additions, changes and comments on this document are welcome and encouraged. Such suggestions may be submitted using the online change request form on OGC web site: <link target="http://ogc.standardstracker.org/"/></p>
</clause>
</feedback-statement>
</boilerplate><preface><abstract id="_abstract"><title>Abstract</title><p id="_f348fa41-f40d-e2a5-87f1-f9c8f83679ef">OGC API Standards define modular API building blocks to spatially enable Web APIs in a consistent way. The <eref type="inline" bibitemid="OpenAPI-Spec" citeas="OpenAPI Specification 3.0.2">OpenAPI specification</eref> is used to define the API building blocks.</p>

<p id="_aec4597b-4c71-399d-eae5-9b1c5a712b8a">The OGC API Processes Standard (aka Processes API) defines API building blocks to describe, execute, monitor and retrieve results of Web-accessible processes. OGC API Processes is comprised of multiple parts, each of them is a separate OGC Standard.</p>

<p id="_2e00133c-e259-2cce-0e6c-ed22fcbc7d44">The OGC API — Processes — Part 2: Deploy, Replace, Undeploy draft specification extends the core capabilities specified in OGC API — Processes — Part 1: Core [<eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2"/>] with the ability to dynamically add, modify and/or delete individual processes using an implementation (endpoint) of the OGC API — Processes Standard.</p>

<p id="_77eea8d7-cef8-cd53-9b25-cf8c56a56776">The OGC API — Processes — Part 3: Workflows draft specification extends the core capabilities specified in OGC API — Processes — Part 1: Core [<eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2"/>] with the ability to …​</p>

<p id="_55c88114-2158-cd12-3cac-94ce0b061570">The OGC API — Processes — Part 4: Job Management draft specification extends the core capabilities specified in OGC API — Processes — Part 1: Core [<eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2"/>] with the ability to create, manage and monitor jobs that are associated with processes execution. This part of the standard also defines how to ensure provenance information is preserved and findable.</p>

<admonition id="_f4bf793c-6cfa-7275-ce7f-f150da0174a2" type="caution"><p id="_68a11d9b-3805-44f0-29ca-479376184f3e">This is a DRAFT version of the 4th part of the OGC API — Processes standards. This draft is not complete and there are open issues that are still under discussion.</p>
</admonition></abstract><clause id="_security_considerations" type="security" obligation="informative">
<title>Security Considerations</title>
<p id="_00c9472e-dbc7-f796-a8df-a150ce697468">See <eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2">OGC API — Processes — Part 1: Core</eref>, Clause 10.4.</p>

<p id="_0463ef50-f617-12e5-10bc-527274147171">Since creating and updating jobs will change the jobs available to a client, servers will — in almost all cases — restrict the access to these operations.</p>

<p id="_9e4a6fef-1040-62ae-59c1-6e896dfdd464">Users making modifications to job resources need to:</p>

<ol id="_6df6df56-53ab-a1de-1c53-5a83bc6377ad" type="arabic"><li><p id="_db72525e-d308-2d6c-f2a9-f6a3e2c689bd">Be authenticated,</p>
</li>
<li><p id="_724707f7-a5fa-ac64-2c5b-756db3f86058">Have “modification privileges” on the jobs offered through the API,</p>
</li>
<li><p id="_a06f570f-7a39-985f-ba16-f9721c1b85ce">Have access to one or more of the POST and/or PATCH methods on the jobs /job and /jobs/{jobId} endpoints.</p>
</li>
</ol>

<p id="_f2acf1d5-dc7f-f046-c093-060f2df9f0ca">The API definition, as defined in Clause 7.3 from <eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2"/>, must reflect this in the resource paths and their available methods.</p>
</clause><submitters id="_submitters">
<title>Submitters</title>
<p id="_feaa5b51-ad60-39cf-a4bd-25c944916941">All questions regarding this submission should be directed to the editors or the submitters:</p>

<table id="_d723ae37-c7be-e4a9-a3fc-86ffc4a83cb9" unnumbered="true"><thead><tr><th valign="middle" align="left">Name</th>
<th valign="middle" align="left">Affiliation</th>
</tr></thead>
<tbody><tr><td valign="middle" align="left">Gérald Fenoy <em>(editor)</em></td>
<td valign="middle" align="left">GeoLabs</td>
</tr><tr><td valign="middle" align="left">Francis Charette Migneault <em>(editor)</em></td>
<td valign="middle" align="left">Centre de Recherche Informatique de Montréal (CRIM)</td>
</tr><tr><td valign="middle" align="left">Panagiotis (Peter) A. Vretanos</td>
<td valign="middle" align="left">CubeWerx Inc.</td>
</tr></tbody>
</table>
</submitters></preface><sections>

<clause id="_scope" type="scope" obligation="normative">
<title>Scope</title>
<p id="_9a5ff78c-7398-5cf9-3635-4abfdf275148">The OGC API — Processes — Part 4 Standard is an extension to the OGC API – Processes – Part 1: Core Standard [<eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2"/>] and defines the behavior of a server that supports the ability to create jobs without implying the process execution starts right away.</p>

<p id="_6824af80-da89-f664-3293-47e09cb572c2">Specifically, the Processes Part 4 Standard specifies:</p>

<ul id="_f0671639-63cf-94b1-d752-3decb17f2720"><li><p id="_f1a081c9-773a-f05f-61d7-85882315aff2">How to manage job.</p>
</li>
<li><p id="_c7c65dfe-3f3d-65f3-2977-fd45a7fda6db">How to handle provenenance information associated with a job.</p>
</li>
</ul>
</clause>

<clause id="_conformance" type="conformance" obligation="normative">
<title>Conformance</title>
<p id="_d0ff23cb-8f01-b005-947a-c73002a63cd8">The OGC API — Processes — Part 4 Standard defines the following requirements classes.</p>

<p id="_683e2e8b-abb1-35f1-0206-6501d2cc86b1">The main requirements class is:</p>

<ul id="_00cc3af8-9964-58f9-0774-d24b4cc9f8c6"><li><p id="_56b07a2e-6f5d-ebf5-a3bd-15a3e1e35665"><xref target="rc_job-management">Job Management</xref>.</p>
</li>
</ul>

<p id="_82ab0468-50c4-0758-dc0f-38626718ce56">This class specifies requirements that any Web API implementing Processes Part 4 must conform with.</p>

<p id="_94af534f-f94c-7ecc-e5d5-01509123b20b">The <tt>Job Management</tt> class does not mandate a specific encoding for the job definition. However, the Part 4 extension defines the following conformance class:</p>

<ul id="_3d14c1c7-ce70-b34f-629f-1747641a593b"><li><p id="_3688ad0f-61a8-cf17-41ae-cd2a1994fa73"><xref target="rc_ogcapi-processes">OGC API — Processes — Workflow Execute Request</xref></p>
</li>
<li><p id="_ce50a469-b841-2d1e-992d-fcc056fd3402"><xref target="rc_openeo">OpenEO Process Graph</xref></p>
</li>
</ul>

<p id="_a641f652-e161-b3ab-4fe5-89226681b0c6">The <tt>OGC API - Processes - Workflow Execute Request</tt> class defines that jobs can be created from an OGC API — Processes — Workflow Execute Request.</p>

<p id="_1ca73361-6915-6915-d41a-f606911abb19">The <tt>OpenEO Process Graph</tt> class defines that jobs can be created from an OpenEO Process Graph.</p>

<p id="_86bead28-60b4-0781-cecf-c858aa93826f">The provenance information associated with a job is not mandated to be supported by the server. A dedicated requirements class  <xref target="rc_provenance">Provenance</xref> is defined for this feature.</p>

<p id="_d53580c3-bf36-9f9c-8110-baf5a80a77de">The standardization target for all Conformance class defined in this Standard is “Web API”.</p>

<p id="_500eb779-38c2-8605-2b5e-342b78d758ec">Conformance with this Standard shall be checked using all the relevant tests specified in  <xref target="ats"/> of this document. The framework, concepts, and methodology for testing, and the criteria to be achieved to claim conformance are specified in the OGC Compliance Testing Policies and Procedures and the OGC Compliance Testing web site.</p>
</clause>



<terms id="_terms_definitions_and_abbreviated_terms" obligation="normative">
<title>Terms, definitions and abbreviated terms</title><p id="_4311f999-5926-535e-0e11-4d86eb6f4c0b">No terms and definitions are listed in this document.</p>

<clause id="_terms_and_definitions" obligation="normative">
<title>Terms and definitions</title>
<p id="_2f87195f-3c2b-5379-28b7-7bd1eea6d33a">See <eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2"/>, Clause 4.1.</p>
</clause>

<definitions id="_abbreviated_terms" type="abbreviated_terms" obligation="normative">
<title>Abbreviated terms</title>
<p id="_13742749-bd28-ec62-1b94-23eb146c65fa">See <eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2"/>, Clause 4.2.</p>
</definitions></terms>

<clause id="_conventions_and_background" obligation="normative">
<title>Conventions and background</title>
<p id="_c996b98e-6eca-44c3-0702-a7e2ae672188">See <eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2"/>, Clause 5.</p>
</clause>

<clause id="_requirements_class_job_management" obligation="normative">
<title>Requirements Class “Job Management”</title>
<clause id="job-management" obligation="normative">
<title>Overview</title>
<requirement id="rc_job-mangement" model="ogc" type="class" obligation="requirement"> <subject>Web API</subject><inherit><eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2">OGC API — Processes — Part 1: Core, Conformance Class ‘core’</eref></inherit><inherit><xref target="rfc2616">RFC 2616 (HTTP/1.1)</xref></inherit><classification><tag>label</tag><value><link target="http://www.opengis.net/spec/ogcapi-processes-4/1.0/req/job-management"/></value></classification>
</requirement>

<p id="_c783f341-c4a7-96ee-9a3d-d269eae99c7f">A server that implements the Job Management Requirements Class provides the ability to create, update and start jobs.</p>

<p id="_ba1d37fb-52d1-3ee8-0ef4-9e511770c8dd">The HTTP POST method on the <tt>/jobs</tt> path is used on to create new jobs.</p>

<p id="_2f057601-b725-468a-af43-56048e8db50e">The HTTP PATCH method on the <tt>/jobs/{jobId}</tt> is used to update the definition of a previously created jobs that are accessible via the Processes API endpoint.</p>

<p id="_ecac6804-021e-871c-18a6-3406543bf46d">Finally, the HTTP POST method on the <tt>/job/{jobId}/results</tt> is used to start a job.</p>

<p id="_001651a0-8284-0d02-6db5-ca84b4e62ac5">Creating or updating a job requires that a formal description of the new or updated jobs be provided by the client.  This Standard does not mandate that a specific jobs schema be used. However, this extension defines the following conformance classe:</p>

<ul id="_2d793029-d096-ca79-abb1-16791e1c2c59"><li><p id="_5de9d37e-91b4-1b77-a075-6c20f209b259"><xref target="rc_ogcapi-processes">OGC API — Processes — Wrokflow Execute Request</xref>, that enables support for OGC API — Processes — Part 3: Wofklows for jobs definitions.</p>
</li>
<li><p id="_dc88e715-8792-3e2c-218a-295c0ed23ed0"><xref target="rc_openeo">OpenEO Process Graph</xref>, that enables support for OpenEO-encoded jobs definitions.</p>
</li>
</ul>

<clause id="job-management-http_status_codes" obligation="normative">
<title>HTTP status codes</title>
<p id="_e0b67be8-e690-432a-39fe-6adcd8070379">Clients implementing the Processes API Part 4 should be prepared to handle any legal HTTP or HTTPS status code.</p>

<p id="_c3636c9e-756d-7f8b-b753-ab76acad0518">The <strong>Status Codes</strong> listed in <xref target="status_codes"/> are of particular relevance to implementors of this Standard. Status codes 200, 201 and 404 are called out in API requirements. Therefore, support for these status codes is mandatory for all compliant implementations. The remainder of the status codes in <xref target="status_codes"/> are not mandatory, but are important for the implementation of a well functioning API implementation. Support for these status codes is strongly encouraged for both client and server implementations.</p>

<table id="status_codes"><colgroup><col width="15%"/><col width="85%"/></colgroup>
<name>Typical HTTP status codes</name>
<thead><tr><th valign="middle" align="left">Status code</th>
<th valign="middle" align="left">Description</th>
</tr></thead>
<tbody><tr><td valign="middle" align="left"><tt>200</tt></td>
<td valign="middle" align="left">A successful request.</td>
</tr><tr><td valign="middle" align="left"><tt>201</tt></td>
<td valign="middle" align="left">The server has successfully completed the operation and a new resource has been created.</td>
</tr><tr><td valign="middle" align="left"><tt>202</tt></td>
<td valign="middle" align="left">The request was accepted for processing, but the processing was not completed. The request might or might not eventually be acted upon, as it might be disallowed when processing actually takes place.</td>
</tr><tr><td valign="middle" align="left"><tt>204</tt></td>
<td valign="middle" align="left">A successful request with no additional content to send in the response.</td>
</tr><tr><td valign="middle" align="left"><tt>400</tt></td>
<td valign="middle" align="left">The server cannot or will not process the request due to an apparent client error. For example, a query parameter had an incorrect value.</td>
</tr><tr><td valign="middle" align="left"><tt>401</tt></td>
<td valign="middle" align="left">The request requires user authentication. The response includes a <tt>WWW-Authenticate</tt> header field containing a challenge applicable to the requested resource.</td>
</tr><tr><td valign="middle" align="left"><tt>403</tt></td>
<td valign="middle" align="left">The server understood the request, but is refusing to execute the request. While status code <tt>401</tt> indicates missing or bad authentication, status code <tt>403</tt> indicates that authentication is not the issue, but that the client is not authorized to perform the requested operation on the resource.</td>
</tr><tr><td valign="middle" align="left"><tt>404</tt></td>
<td valign="middle" align="left">The requested resource does not exist on the server. For example, a path parameter had an incorrect value.</td>
</tr><tr><td valign="middle" align="left"><tt>405</tt></td>
<td valign="middle" align="left">The request method is not supported. For example, a POST request was submitted, but the resource only supports GET requests.</td>
</tr><tr><td valign="middle" align="left"><tt>406</tt></td>
<td valign="middle" align="left">Content negotiation failed. For example, the <tt>Accept</tt> header submitted in the request did not support any of the media types supported by the server for the requested resource.</td>
</tr><tr><td valign="middle" align="left"><tt>412</tt></td>
<td valign="middle" align="left">The status code indicates that one or more conditions given in the request header fields evaluated to false when tested by the server.</td>
</tr><tr><td valign="middle" align="left"><tt>413</tt></td>
<td valign="middle" align="left">The server is refusing to process the request because the request content is larger than the server is willing or able to process.</td>
</tr><tr><td valign="middle" align="left"><tt>415</tt></td>
<td valign="middle" align="left">The server is refusing to service the request because the content is in a format not supported by this method on the target resource.</td>
</tr><tr><td valign="middle" align="left"><tt>422</tt></td>
<td valign="middle" align="left">The server understands the content type of the request content and the syntax of the request content is correct, but was unable to process the contained instructions. For example, the submitted resource does not meet a semantic constraint, e.g. a mandatory property is missing.</td>
</tr><tr><td valign="middle" align="left"><tt>500</tt></td>
<td valign="middle" align="left">An internal error occurred in the server.</td>
</tr></tbody>
<note id="_79d8d7df-8a91-5d85-e062-4a77cef2fcd8"><p id="_1f29a5e0-92fc-e11d-411f-a67aeeb4812e">Status code <tt>422</tt> is not yet an official HTTP status code, but is expected to be added by the <link target="https://www.ietf.org/archive/id/draft-ietf-httpbis-semantics-14.html#name-422-unprocessable-content">draft IETF RFC “HTTP Semantics”</link>.</p>
</note></table>



<p id="_457fa864-9d20-d8c2-7c03-3e8a0ebbe64f">More specific guidance is provided for each resource, where applicable.</p>

<permission id="per_job-management_additional-status-codes" model="ogc"> <classification><tag>label</tag><value>/per/job-management/additional-status-codes</value></classification><component class="part"><p id="_68f9b4b5-98ba-065b-7473-169909f0c800">Servers MAY support other HTTP protocol capabilities. Therefore, the server may return other status codes than those listed in <xref target="status_codes"/>.</p>
</component>
</permission>

<p id="_a4e2c41d-3d88-7599-d8f8-abd4ab4e6337">The API Description Document describes the HTTP status codes generated by that API imeplementation instance. This should not be an exhaustive list of all possible status codes. It is not reasonable to expect an API designer to control the use of HTTP status codes which are not generated by their software. Therefore, it is recommended that the API Description Document be limited to describing HTTP status codes relevant to the proper operation of the API application logic. Client implementations should be prepared to receive HTTP status codes in addition to those described in the API Description Document.</p>
</clause>

<clause id="cross_origin" obligation="normative">
<title>Cross-origin requests</title>
<p id="_6e48df58-c2a9-6da6-1699-b8c9c9bec0b5">See <eref type="inline" bibitemid="OAFeat-1" citeas="OGC 17-069r3">OGC API — Features — Part 1: Core</eref>, section <link target="http://www.opengis.net/doc/IS/ogcapi-features-1/1.0#cross_origin">Support for cross-origin requests</link>, about the importance of supporting cross-origin requests, typically via <link target="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing">Cross-origin resource sharing (CORS)</link>.</p>
</clause>
</clause>

<clause id="job-management-create" obligation="normative">
<title>Creating a new job</title>
<clause id="_sequence_diagram" obligation="normative">
<title>Sequence diagram</title>
<p id="_34e1684b-9b66-0410-4c0d-02b5a901f38b">The following diagram illustrates the sequence diagram for deploying a new process to the API:</p>

<sourcecode id="_a70ed216-c2dd-cacb-7e17-36168254f858">Client                                                        Server
  |                                                             |
  |  POST /jobs   HTTP/1.1                                      |
  |  Content-Type: application/json                             |
  |                                                             |
  |------------------------------------------------------------&gt;|
  |                                                             |
  |  HTTP/1.1 201 Created                                       |
  |  Location: /jobs/{jobId}                                    |
  |&lt;------------------------------------------------------------|</sourcecode>

</clause>

<clause id="_operation" obligation="normative">
<title>Operation</title>
<requirement id="req_job-management_create_post-op" model="ogc"> <classification><tag>label</tag><value>/req/job-management/create-post-op</value></classification><component class="part"><p id="_59b20392-f885-485f-3d60-60874d0e69c5">The server SHALL support the HTTP POST operation at the path <tt>/jobs</tt>.</p>
</component>
</requirement>
</clause>

<clause id="_request_body" obligation="normative">
<title>Request body</title>
<clause id="_overview" obligation="normative">
<title>Overview</title>
<requirement id="req_job-management_create_body" model="ogc"> <classification><tag>label</tag><value>/req/job-management/create-body</value></classification><component class="part"><p id="_9eada9e6-11fc-b695-6cab-cd3860462ebb">The body of the POST request SHALL be in JSON format.</p>
</component>
</requirement>

<permission id="per_job-management_create_body" model="ogc"> <classification><tag>label</tag><value>/per/job-management/create-body</value></classification><component class="part"><p id="_56fcb431-af59-80f5-2c2b-8557db1c1155">A server MAY support any encoding in the body of a HTTP POST operation.</p>
</component>
</permission>

<requirement id="req_job-management_create_content-type" model="ogc"> <classification><tag>label</tag><value>/req/job-management/create-content-type</value></classification><component class="part"><p id="_9d144068-d98a-2172-3d82-11ea53de687b">The <tt>Content-Type</tt> <link target="https://tools.ietf.org/html/rfc2616#section-14.17">header</link> SHALL be used to declare the media type of the request.</p>
</component>
</requirement>

<p id="_f327ded0-8539-52ab-aafc-624935550afa">See <link target="https://www.rfc-editor.org/rfc/rfc7231#section-3.1.1.5">section 3.1.1.5 of RFC 7231</link> for details.</p>

<permission id="per_job-management_create_content-schema" model="ogc"> <classification><tag>label</tag><value>/per/job-management/create-content-schema</value></classification><component class="part"><p id="_ea06a074-ff10-1347-6037-03ec924d5517">The <tt>Content-Schema</tt> header MAY be an URI to a JSON or OpenAPI 3.0 Schema document that describes the structure of the request body.</p>
</component>
</permission>
</clause>

<clause id="_ogc_api_processes_workflow_execute_request_body" obligation="normative">
<title>OGC API — Processes — Workflow Execute Request body</title>
<recommendation id="rec_job-management_create_body-ogcapi-processes" model="ogc"> <classification><tag>label</tag><value>/rec/job-management/create-body-ogcapi-processes</value></classification><component class="part"><p id="_21e4c515-b1ec-6e86-8d1e-c9d2bbe0e2da">If the job can be encoded as an <xref target="rc_ogcapi-processes">OGC API — Processes — Workflow Execute Request</xref>, implementation SHOULD consider supporting the <xref target="rc_ogcapi-processes">OGC API — Processes — Workflow Execute Request</xref> encoding.</p>
</component>
</recommendation>
</clause>

<clause id="_openeo_process_graph_body" obligation="normative">
<title>OpenEO Process Graph body</title>
<recommendation id="rec_job-management_create_body-openeo" model="ogc"> <classification><tag>label</tag><value>/rec/job-management/create-body-openeo</value></classification><component class="part"><p id="_b40d2102-36ca-1186-ee28-472de8b30d16">If the job can be encoded as an <xref target="rc_openeo">OpenEO graph</xref>, implementation SHOULD consider supporting the <xref target="rc_openeo">OpenEO graph</xref> encoding.</p>
</component>
</recommendation>
</clause>
</clause>

<clause id="_response" obligation="normative">
<title>Response</title>
<requirement id="req_job-management_create_response-jobid" model="ogc"> <classification><tag>label</tag><value>/req/job-management/create-response-jobid</value></classification><component class="part"><p id="_120716a1-2fcd-aefe-f0e8-260f528fa15c">If the operation completes, the server SHALL generate a job identifier (i.e. <tt>{jobId}</tt>) for the created job.</p>
</component>
</requirement>

<requirement id="req_job-management_create_response_success" model="ogc"> <classification><tag>label</tag><value>/req/job-management/create-response-success</value></classification><component class="part"><p id="_217f3c95-ce68-0151-7b40-f5ae2f400e4b">A successful execution of the operation SHALL be reported as a response with a HTTP status code <tt>201</tt>.</p>
</component><component class="part"><p id="_8aefb5a1-d845-7e7f-a696-fc8565fef146">A response with HTTP status code <tt>201</tt> SHALL include a <tt>Location</tt> header with the URI of the deployed processes (path: <tt>/jobs/{jobId}</tt>).</p>
</component>
</requirement>

<requirement id="req_job-management_create_response-body" model="ogc"> <classification><tag>label</tag><value>/req/job-management/create-response-body</value></classification><component class="part"><p id="_a717cdef-e9c0-0893-8e0d-d666c5dc5907">The response SHALL include a body that contains a status information of the created job that conforms to the <link target="https://schemas.opengis.net/ogcapi/processes/part1/1.0/openapi/schemas/statusInfo.yaml">statusInfo.yaml</link> schema.</p>
</component><component class="part"><p id="_9d1820bb-ee5b-fabc-cd9e-80282886dfd2">The response SHALL contain a <tt>created</tt> status code and the <tt>id</tt> property that contains the job identifier.</p>
</component>
</requirement>
</clause>

<clause id="_exceptions" obligation="normative">
<title>Exceptions</title>
<p id="_0411b837-798f-0d95-77bc-a1baff46f1d9">See <xref target="job-management-http_status_codes"/> for general guidance.</p>

<p id="_a092d21e-4606-535a-8fe6-dd7ff6031f8d">If the request body’s media type is not supported by the server, see requirement /req/deploy-replace-undeploy/deploy/unsupported-media-type from <eref type="inline" bibitemid="OAProc-2" citeas="OGC 20-044"/>.</p>

<requirement id="req_job-management_create_unsupported-schema" model="ogc"> <classification><tag>label</tag><value>/req/job-management/create-unsupported-schema</value></classification><component class="part"><p id="_fe235e0b-0a77-20de-482a-ce15ddb12610">If the server does not support the Content-Schema header associated with the request body, the code of the response SHALL be <tt>422 Unprocessable Content</tt>.</p>
</component><component class="part"><p id="_ecff7330-b3f6-6298-e8d7-0b81c63d4f1d">The content of that response SHALL be based upon the OpenAPI 3.0 schema  <link target="https://raw.githubusercontent.com/opengeospatial/ogcapi-processes/master/core/openapi/schemas/exception.yaml">exception.yaml</link>.</p>
</component><component class="part"><p id="_58f15e2f-0f8e-04e1-fdc1-79fe389ddd90">The <tt>type</tt> of the exception SHALL be “http://www.opengis.net/def/exceptions/ogcapi-processes-4/1.0/unsupported-schema”.</p>
</component>
</requirement>
</clause>
</clause>

<clause id="job-management-update" obligation="normative">
<title>Updating an existing job</title>
<clause id="_sequence_diagram_2" obligation="normative">
<title>Sequence diagram</title>
<p id="_d9809b52-5704-7ef9-6423-4abfdc09a8be">The following diagram illustrates the sequence diagram for updating a
previously created job.  The identifier of the job does not change.<note id="_12caf5e4-7069-f7e7-af37-444a050a22f3"><p id="_a2d27ea6-ebce-3a59-f0df-cb680e74644b">The new job definition replaces the old job definition. Version control is not discussed in this Standard.</p>
</note></p>



<sourcecode id="_f1bf2758-8c17-3f00-3e01-dd12b29a36f6">Client                                                        Server
  |                                                             |
  |  PATCH /jobs/{jobId}   HTTP/1.1                             |
  |  Content-Type: application/json                             |
  |                                                             |
  |------------------------------------------------------------&gt;|
  |                                                             |
  |  HTTP/1.1 200 OK                                            |
  |&lt;------------------------------------------------------------|</sourcecode>

</clause>

<clause id="_operation_2" obligation="normative">
<title>Operation</title>
<requirement id="req_job-management_update_patch-op" model="ogc"> <classification><tag>label</tag><value>/req/job-management/update-patch-op</value></classification><component class="part"><p id="_5765e160-3b4b-f86d-3d8f-d13f8c23e7d9">For every created jobs (path ‘/jobs/{jobId}’), the server SHALL support the HTTP PATCH operation.</p>
</component><component class="part"><p id="_b7d85a9c-dff1-a81c-cbea-6e16b88a44df">The parameter ‘jobId’ is each ‘jobID’ property in the jobs list response (JSONPath: <tt>$.jobs[*].id</tt>).</p>
</component>
</requirement>
</clause>

<clause id="_request_body_2" obligation="normative">
<title>Request body</title>
</clause>

<clause id="_overview_2" obligation="normative">
<title>Overview</title>
<requirement id="req_job-management_update_body" model="ogc"> <classification><tag>label</tag><value>/req/job-management/update-body</value></classification><component class="part"><p id="_05adf478-66b0-bb00-4ff1-d41511e77fcf">The body of a PATCH request SHALL be in JSON format.</p>
</component>
</requirement>

<permission id="per_job-management_update_body" model="ogc"> <classification><tag>label</tag><value>/per/job-management/update-body</value></classification><component class="part"><p id="_d716a117-40e2-ac55-f5bc-c9af59d8fbe6">A server MAY support any encoding in the body of a HTTP PATCH operation.</p>
</component>
</permission>

<requirement id="req_job-management_update_content-type" model="ogc"> <classification><tag>label</tag><value>/req/job-management/update-content-type</value></classification><component class="part"><p id="_d9bc2000-cc20-5230-6108-e910ec6796b9">As per <xref target="rfc2616">HTTP 1.1</xref> (<link target="https://tools.ietf.org/html/rfc2616#section-14.17"/>) the ‘Content-Type’ header SHALL be used to indicate the media type of a request body.</p>
</component>
</requirement>

<permission id="per_job-management_update_content-schema" model="ogc"> <classification><tag>label</tag><value>/per/job-management/update-content-schema</value></classification><component class="part"><p id="_16d37cee-0841-4288-ca0d-8cd4672121c9">The <tt>Content-Schema</tt> header MAY be used to indicate the schema of a request body for updating a job.</p>
</component>
</permission>

<clause id="_ogc_api_processes_workflow_execute_request" obligation="normative">
<title>OGC API — Processes — Workflow Execute Request</title>
<recommendation id="rec_job-management_update-ogcapi-processes" model="ogc"> <classification><tag>label</tag><value>/rec/job-management/update-body-ogcapi-processes</value></classification><component class="part"><p id="_67a207fd-d9a2-a735-bc26-54a4bf15ab28">If a job can be created from an <xref target="rc_ogcapi-processes">OGC API — Processes — Workflow Execute Request</xref>, implementations SHOULD consider supporting the <xref target="rc_ogcapi-processes">OGC API — Processes — Workflow Execute Request</xref> encoding.</p>
</component>
</recommendation>
</clause>

<clause id="_openeo_process_graph" obligation="normative">
<title>OpenEO Process Graph</title>
<recommendation id="rec_job-management_update-openeo" model="ogc"> <classification><tag>label</tag><value>/rec/job-management/update-body-openeo</value></classification><component class="part"><p id="_16a2a097-005c-3bef-61a6-62474908c4e4">If a job can be created from an <xref target="rc_openeo">OpenEO Process Graph</xref>, implementations SHOULD consider supporting the <xref target="rc_openeo">OpenEO Process Graph</xref> encoding.</p>
</component>
</recommendation>
</clause>
</clause>

<clause id="_response_2" obligation="normative">
<title>Response</title>
<requirement id="req_job-management_update_response" model="ogc"> <classification><tag>label</tag><value>/req/job-management/update-response</value></classification><component class="part"><p id="_f4007821-8d26-0559-e45b-b6385e13a710">A successful execution of the operation SHALL be reported as a response with a HTTP status code <tt>200</tt> or <tt>204</tt>.</p>
</component>
</requirement>

<p id="_43459ffe-13f8-2256-a2bb-72a37261b79d">The status code depends on the server. If the server has replaced the job, the response is either <tt>200</tt> (if the response includes additional content) or <tt>204</tt> (if the response has no additional content).</p>
</clause>

<clause id="_exceptions_2" obligation="normative">
<title>Exceptions</title>
<p id="_73eb5953-ca9b-ee6b-70fb-0e5eb5616d07">See <xref target="job-management-http_status_codes"/> for general guidance.</p>

<p id="_aad34a06-3200-827e-35d4-9645b559586a">If the request body’s media type is not supported by the server, see requirement /req/deploy-replace-undeploy/deploy/unsupported-media-type from <eref type="inline" bibitemid="OAProc-2" citeas="OGC 20-044"/>.</p>

<p id="_d8083048-b5bb-19f2-eb85-1f2e90f98c61">If the job with the specified identifier does not exist on the server, see requirement /req/core/job-exception-no-such-job from <eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2"/>.</p>

<requirement id="req_job-management_update_response-locked" model="ogc"> <classification><tag>label</tag><value>/req/job-management/update-response-locked</value></classification><component class="part"><p id="_849aaff6-e15c-b002-5fb2-b358cbb7227b">If a job is locked, meaning that it is currently being processed (status set to <tt>accepted</tt> or <tt>running</tt>), the server SHALL respond with HTTP status code <tt>423 Locked</tt>.</p>
</component><component class="part"><p id="_11452159-22bd-60f4-4530-ed85f966408d">The response body SHALL be based upon the OpenAPI 3.0 schema <link target="https://raw.githubusercontent.com/opengeospatial/ogcapi-processes/master/core/openapi/schemas/exception.yaml">exception.yaml</link>.</p>
</component><component class="part"><p id="_18e34c4f-05f1-8950-9559-26a3f570c035">The <tt>type</tt> of the exception SHALL be “http://www.opengis.net/def/exceptions/ogcapi-processes-4/1.0/locked”.</p>
</component>
</requirement>
</clause>
</clause>

<clause id="job-management-start" obligation="normative">
<title>Staring a job</title>
<clause id="_sequence_diagram_3" obligation="normative">
<title>Sequence diagram</title>
<p id="_b5f26657-c0d9-6b36-0f53-b03b26797fbe">The following diagram illustrates the sequence diagram for starting the execution of a previously created jobs.</p>

<sourcecode id="_9a91db8b-3332-4df8-9462-4d32f5188d90">Client                                                        Server
  |                                                             |
  |  POST /jobs/{jobId}/results   HTTP/1.1                      |
  |------------------------------------------------------------&gt;|
  |                                                             |
  |  HTTP/1.1 200 OK                                            |
  |&lt;------------------------------------------------------------|</sourcecode>

</clause>

<clause id="_operation_3" obligation="normative">
<title>Operation</title>
<requirement id="req_job-management_start_post-op" model="ogc"> <classification><tag>label</tag><value>/req/job-management/start-post-op</value></classification><component class="part"><p id="_a93fd6ec-bfcc-87d0-2e65-50946f1dfa25">For every created jobs (path: <tt>/jobs/{jobId}/results</tt>), the server SHALL support the HTTP POST operation.</p>
</component><component class="part"><p id="_8436153b-6dc8-bea6-a88a-620e448adf62">The parameter <tt>jobId</tt> is each <tt>jobID</tt> property in the job list response (JSONPath: <tt>$.jobs[*].id</tt>).</p>
</component>
</requirement>
</clause>

<clause id="_response_3" obligation="normative">
<title>Response</title>
<requirement id="req_job-management_start_response" model="ogc"> <classification><tag>label</tag><value>/req/job-management/start-response</value></classification><component class="part"><p id="_bfd626f2-403f-eaea-72c4-0cd09f7f4d04">A successful execution of the operation SHALL be reported as a response with a HTTP status code ‘200’.</p>
</component><component class="part"><p id="_0dc83efb-3525-4df8-e7fa-b5648b3c4609">A response SHALL be a document that conforms to statusInfo.yaml.</p>
</component>
</requirement>
</clause>

<clause id="_exceptions_3" obligation="normative">
<title>Exceptions</title>
<p id="_4bf553dd-a61c-a58a-833a-42c662df6e94">See <xref target="job-management-http_status_codes">HTTP status codes</xref> for general guidance.</p>

<p id="_30ab80f5-ed1e-50e0-174f-9fce65587fb9">If the job with the specified identifier does not exist on the server, see requirement /req/core/job-exception-no-such-job from <eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2"/>.</p>

<p id="_af6b5946-c247-0d45-3555-15aa79f2be9f">If the job with the specified identifier is locked, see requirement /req/job-management/update/response-locked from <xref target="job-management-update"/>.</p>
</clause>
</clause>

<clause id="job-management-definition" obligation="normative">
<title>Job definition</title>
<p id="_d7f18ae5-2f90-1fb8-76fe-9621df1a7334">For every job, it is possible to retrieve its original definition. It corresponds to the request’s body used to create or update the jobs.</p>

<clause id="_operation_4" obligation="normative">
<title>Operation</title>
<requirement id="req_job-management_definition_get-op" model="ogc"> <classification><tag>label</tag><value>/req/job-management/definition-get-op</value></classification><component class="part"><p id="_f8343c8c-67a6-5853-89bb-4b924e0a0c7c">For every jobs (using method: POST on path: /jobs/{jobId}), the server SHALL support the HTTP GET operation at the path <tt>/jobs/{jobId}/definition</tt>.</p>
</component><component class="part"><p id="_ac22c114-f460-53f1-0b37-b3ce1437ce56">The parameter <tt>jobId</tt> is each <tt>id</tt> property in the job-list response (JSONPath: <tt>$.jobs[*].id</tt>).</p>
</component>
</requirement>
</clause>

<clause id="_response_4" obligation="normative">
<title>Response</title>
<clause id="_overview_3" obligation="normative">
<title>Overview</title>
<requirement id="req_job-management_definition_response-success" model="ogc"> <classification><tag>label</tag><value>/req/job-management/definition-response-success</value></classification><component class="part"><p id="_a711b14a-7976-bbb2-20e3-d97c7c898cd5">A successful access to the resource SHALL be reported as a response with a HTTP status code <tt>200</tt>.</p>
</component>
</requirement>

<requirement id="req_job-management_definition_response-body" model="ogc"> <classification><tag>label</tag><value>/req/job-management/definition-response-body</value></classification><component class="part"><p id="_52f35875-3584-1c6c-85f4-6a450ca422bc">A response with HTTP status code <tt>200</tt> SHALL include a body that contains the request body used to create or update the job.</p>
</component>
</requirement>
</clause>
</clause>

<clause id="_exceptions_4" obligation="normative">
<title>Exceptions</title>
<p id="_a35f98ae-79c4-cabf-4b34-7df10f32509e">See <xref target="deploy-replace-undeploy-http_status_codes">HTTP status codes</xref> for general guidance.</p>

<p id="_fb5a03f6-fefe-59dd-31a9-ab46191014b1">If the job with the specified identifier does not exist on the server, see requirement /req/core/job-exception-no-such-job from <eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2"/>.</p>
</clause>
</clause>
</clause>

<clause id="_requirements_class_ogc_api_process_workflow_execute_request" obligation="normative">
<title>Requirements Class “OGC API — Process — Workflow Execute Request”</title>
<clause id="ogcapi-processes-overview" obligation="normative">
<title>Overview</title>
<requirement id="rc_ogcapi-processes" model="ogc" type="class" obligation="requirement"> <subject>Web API</subject><inherit><eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2">OGC API — Processes — Part 1: Core</eref></inherit><inherit><eref type="inline" bibitemid="OAProc-3" citeas="OGC 21-009">OGC API — Processes — Part 3: Workflows, Conformance Class ‘nested-processing’</eref></inherit><inherit><xref target="rc_job-management">http://www.opengis.net/spec/ogcapi-processes-4/1.0/req/job-management</xref></inherit><classification><tag>label</tag><value><link target="http://www.opengis.net/spec/ogcapi-processes-4/1.0/req/ogcapi-processes"/></value></classification>
</requirement>

<p id="_9a94b33d-5b02-2839-1f1c-b8eea945ff7b">This requirements class defines that the OGC API — Process — Workflow Execute Request is supported as an encoding for job definitions.</p>
</clause>

<clause id="_ogc_api_processes_workflow_execute_request_2" obligation="normative">
<title>OGC API — Processes — Workflow Execute Request</title>
<clause id="_overview_4" obligation="normative">
<title>Overview</title>
<requirement id="req_ogcapi-processes_schema" model="ogc"> <classification><tag>label</tag><value>/req/ogcapi-processes/schema</value></classification><component class="part"><p id="_055e7b96-29a0-5380-0b91-38af56973b63">An <tt>OGC API - Processes - Workflow - Execute Request</tt> document SHALL be based upon the JSON schema <link target="https://github.com/opengeospatial/ogcapi-processes/blob/master/openapi/schemas/processes-workflows/execute-workflows.yaml">execute-workflow.yaml</link>.</p>
</component>
</requirement>
</clause>
</clause>

<clause id="_creating_a_new_job" obligation="normative">
<title>Creating a new job</title>
<clause id="_request_body_3" obligation="normative">
<title>Request body</title>
<requirement id="req_ogcapi-processes_create_body" model="ogc"> <classification><tag>label</tag><value>/req/ogcapi-processes/create-body</value></classification><component class="part"><p id="_75888451-6c79-eddd-65b7-cc780518339b">The body of the POST request SHALL be based upon the OpenAPI 3.0 schema <link target="https://github.com/opengeospatial/ogcapi-processes/blob/master/openapi/schemas/processes-workflows/execute-workflows.yaml">execute-workflows.yaml</link></p>
</component><component class="part"><p id="_01239b62-2694-e6b9-5971-dfe78f1037ea">The media type <tt>application/json</tt> SHALL be used to indicate that request body contains a processes description encoded as an <xref target="rc_ogcapi-processes">OGC API — Processes</xref>.</p>
</component>
</requirement>

<permission id="per_ogcapi-processes_create_content-schema" model="ogc"> <classification><tag>label</tag><value>/per/ogcapi-processes/create-content-schema</value></classification><component class="part"><p id="_b7a060ab-25d5-fdcc-67a8-104e19c5bd6d">The <tt>Content-Schema</tt> header MAY be pointing to the OpenAPI 3.0 schema <link target="https://github.com/opengeospatial/ogcapi-processes/blob/master/openapi/schemas/processes-workflows/execute-workflows.yaml">execute-workflows.yaml</link>.</p>
</component>
</permission>
</clause>
</clause>

<clause id="_updating_an_existing_job" obligation="normative">
<title>Updating an existing job</title>
<clause id="_request_body_4" obligation="normative">
<title>Request body</title>
<requirement id="req_ogcapi-processes_update__body" model="ogc"> <classification><tag>label</tag><value>/req/ogcapi-processes/update-body</value></classification><component class="part"><p id="_611bbb8b-c9fa-bbef-e5c6-cef9ae1b9952">The media type <tt>application/ogcapi-processes+json</tt> SHALL be used to indicate that request body contains a job encoded as an <xref target="rc_openeo">OpenEO</xref>.</p>
</component>
</requirement>

<permission id="per_ogcapi-processes_update_content-schema" model="ogc"> <classification><tag>label</tag><value>/per/ogcapi-processes/update-content-schema</value></classification><component class="part"><p id="_a595adf4-05cf-ff64-7335-c84d8a299ba7">The <tt>Content-Schema</tt> header MAY be pointing to the OpenAPI 3.0 schema <link target="https://github.com/opengeospatial/ogcapi-processes/blob/master/openapi/schemas/processes-workflows/execute-workflows.yaml">execute-workflows.yaml</link>.</p>
</component>
</permission>
</clause>
</clause>

<clause id="_job_definition" obligation="normative">
<title>Job definition</title>
<clause id="_response_content" obligation="normative">
<title>Response content</title>
<requirement id="req_ogcapi-processes_definition_response-body" model="ogc"> <classification><tag>label</tag><value>/req/ogcapi-processes/definition-response-body</value></classification><component class="part"><p id="_5bdd268e-40d8-4c3b-5a25-a54dfb85dea5">A response with HTTP status code <tt>200</tt> SHALL include a body that contains the <xref target="rc_ogcapi-processes">OGC API — Processes — Workflow — Execute Request</xref> to use to deploy the process.</p>
</component>
</requirement>
</clause>
</clause>
</clause>

<clause id="_requirements_class_openeo_process_graph" obligation="normative">
<title>Requirements Class “OpenEO Process Graph”</title>
<clause id="openeo-overview" obligation="normative">
<title>Overview</title>
<requirement id="rc_openeo" model="ogc" type="class" obligation="requirement"> <subject>Web API</subject><inherit><xref target="rc_job-management">http://www.opengis.net/spec/ogcapi-processes-4/1.0/req/job-management</xref></inherit><classification><tag>label</tag><value><link target="http://www.opengis.net/spec/ogcapi-processes-4/1.0/req/openeo"/></value></classification>
</requirement>

<p id="_32d991dd-abae-f4c1-c805-62429f72d419">This requirements class defines that the server supports the OpenEO Process Graph as an encoding for job definitions.</p>
</clause>

<clause id="_openeo_process_graph_2" obligation="normative">
<title>OpenEO Process Graph</title>
<clause id="_overview_5" obligation="normative">
<title>Overview</title>
<requirement id="req_openeo_schema" model="ogc"> <classification><tag>label</tag><value>/req/openeo/schema</value></classification><component class="part"><p id="_b547b858-02be-9df8-f006-9b81b930fe3c">An <tt>OpenEO Process Graph</tt> document SHALL be based upon the OpenEO Process Graph JSON schema <link target="https://openeo.org/documentation/1.0/developers/api/assets/pg-schema.json"/>.</p>
</component>
</requirement>

<sourcecode id="schema_ogcappkg" lang="yaml">
<name><link target="http://schemas.opengis.net/ogcapi/processes/part4/1.0/openapi/schemas/openeo-process-graph.yaml">Schema for OpenEO Process Graph</link></name>
type: object
additionalProperties:
  type: object
  required: 
    - process_id
    - arguments
  properties:
    process_id:
      type: string
    arguments: {}</sourcecode>

</clause>
</clause>

<clause id="_creating_a_new_job_2" obligation="normative">
<title>Creating a new job</title>
<clause id="_request_body_5" obligation="normative">
<title>Request body</title>
<requirement id="req_openeo_create_body" model="ogc"> <classification><tag>label</tag><value>/req/openeo/create-body</value></classification><component class="part"><p id="_c03efe59-3bdd-80dd-8068-f491b4769083">The media type <tt>application/json</tt> SHALL be used to indicate that request body contains a processes description encoded as an <xref target="rc_openeo">OpenEO Process Graph</xref>.</p>
</component>
</requirement>

<permission id="per_openeo_create_content-schema" model="ogc"> <classification><tag>label</tag><value>/per/openeo/create-content-schema</value></classification><component class="part"><p id="_dd2a38a1-1801-ea40-b40b-9306ffe963f5">The <tt>Content-Schema</tt> header MAY be pointing to <link target="https://raw.githubusercontent.com/Open-EO/openeo-processes/master/meta/subtype-schemas.json#/definitions/process-graph">OpenEO Process Graph schema</link>.</p>
</component>
</permission>
</clause>
</clause>

<clause id="_updating_an_existing_job_2" obligation="normative">
<title>Updating an existing job</title>
<clause id="_request_body_6" obligation="normative">
<title>Request body</title>
<requirement id="req_openeo_update__body" model="ogc"> <classification><tag>label</tag><value>/req/openeo/update-body</value></classification><component class="part"><p id="_d6d4d725-2e03-023e-6461-60f14e3dad00">The media type <tt>application/json</tt> SHALL be used to indicate that request body contains a job encoded as an <xref target="rc_openeo">OpenEO Process Graph</xref>.</p>
</component>
</requirement>

<permission id="per_openeo_update_content-schema" model="ogc"> <classification><tag>label</tag><value>/per/openeo/update-content-schema</value></classification><component class="part"><p id="_d50f6b34-5c18-28c4-e3b4-e4bee8fb8ef3">The <tt>Content-Schema</tt> header MAY be pointing to <link target="https://raw.githubusercontent.com/Open-EO/openeo-processes/master/meta/subtype-schemas.json#/definitions/process-graph">OpenEO Process Graph schema</link>.</p>
</component>
</permission>
</clause>
</clause>

<clause id="_job_definition_2" obligation="normative">
<title>Job definition</title>
<clause id="_response_content_2" obligation="normative">
<title>Response content</title>
<requirement id="req_openeo_definition_response-body" model="ogc"> <classification><tag>label</tag><value>/req/openeo/definition-response-body</value></classification><component class="part"><p id="_e853fc8d-2e27-66d9-4e92-f94a581748c2">A response with HTTP status code <tt>200</tt> SHALL include a body that contains the <xref target="rc_openeo">OpenEO Process Graph</xref> to use to deploy the process.</p>
</component>
</requirement>
</clause>
</clause>
</clause>

<clause id="_requirements_class_provenance" obligation="normative">
<title>Requirements Class “Provenance”</title>
<clause id="provenance-overview" obligation="normative">
<title>Overview</title>
<p id="_624af926-fcf8-7009-b128-4007a43bcbc1">This requirements class defines how to allow client application accessing the provenance of a job run.</p>

<requirement id="rc_cwl" model="ogc" type="class" obligation="requirement"> <subject>Web API</subject><inherit><eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2">OGC API — Processes — Part 1: Core</eref></inherit><classification><tag>label</tag><value><link target="http://www.opengis.net/spec/ogcapi-processes-4/1.0/req/provenance"/></value></classification>
</requirement>
</clause>

<clause id="_additional_endpoints" obligation="normative">
<title>Additional endpoints</title>
<clause id="_inputs" obligation="normative">
<title>Inputs</title>
<p id="_7b70acb8-1919-5d25-4608-cf6095ab5153">The server MUST provide an endpoint to retrieve the inputs of a job run.</p>

<clause id="_operation_5" obligation="normative">
<title>Operation</title>
<requirement id="req_job-provenance_inputs_get-op" model="ogc"> <classification><tag>label</tag><value>/req/provenance/inputs-get-op</value></classification><component class="part"><p id="_d27b2f4a-46fe-e7a7-381a-3ef7f6992a3c">For every created jobs (path: <tt>/jobs/{jobId}/inputs</tt>), the server SHALL support the HTTP GET operation.</p>
</component><component class="part"><p id="_a345c40a-d33e-e3cf-3ced-8f913b19061a">The parameter <tt>jobId</tt> is each <tt>jobID</tt> property in the job list response (JSONPath: <tt>$.jobs[*].id</tt>).</p>
</component>
</requirement>
</clause>

<clause id="_response_5" obligation="normative">
<title>Response</title>
<requirement id="req_provenance_inputs_response" model="ogc"> <classification><tag>label</tag><value>/req/provenance/inputs-response</value></classification><component class="part"><p id="_e9c66c92-5cc7-d756-9380-557ef120ef46">A successful execution of the operation SHALL be reported as a response with a HTTP status code ‘200’.</p>
</component><component class="part"><p id="_3494a24c-e31d-ae3c-e69f-870d5b2c7b1f">The response SHALL contains a JSON document that conforms to the schema <link target="https://github.com/opengeospatial/ogcapi-processes/blob/master/openapi/schemas/processes-job-management/inputs.yaml">inputs.yaml</link>.</p>
</component>
</requirement>
</clause>
</clause>

<clause id="_prov" obligation="normative">
<title>Prov</title>
<p id="_21c472f6-0653-e0a5-bccf-680806aac136">The server MUST provide an endpoint to retrieve the provenance of a job.</p>

<clause id="_operation_6" obligation="normative">
<title>Operation</title>
<requirement id="req_job-provenance_prov_get-op" model="ogc"> <classification><tag>label</tag><value>/req/provenance/prov-get-op</value></classification><component class="part"><p id="_05bee4f3-96a3-3cce-7f1f-bd4c27d62d2b">For every created jobs (path: <tt>/jobs/{jobId}/prov</tt>), the server SHALL support the HTTP GET operation.</p>
</component><component class="part"><p id="_739e0c7c-5b29-f5cd-1dee-df8657a543c4">The parameter <tt>{jobId}</tt> is each <tt>id</tt> property in the job list response (JSONPath: <tt>$.jobs[*].id</tt>).</p>
</component>
</requirement>

<permission id="per_job-provenance_run_content-negotiation" model="ogc"> <classification><tag>label</tag><value>/per/provenance/run-content-negotiation</value></classification><component class="part"><p id="_b966ac06-48ee-fd02-42ce-3cf08626284b">Content negotiation MAY be supported to provide alternate representations of the response.</p>
</component><component class="part"><p id="_45871990-3a83-68b4-bfad-9867a122efa5">The server MAY support the following additional content type: <tt>application/ld+json</tt> for PROV-O as JSON-LD</p>
</component><component class="part"><p id="_92f4d43e-d24a-0a26-7955-80f1674a1c99">The server MAY support the following additional content type: <tt>application/xml</tt> for PROV-XML</p>
</component><component class="part"><p id="_a65968fc-deee-e0f6-c8e0-e101f4d89ed4">The server MAY support the following additional content type: <tt>text/provenance-notation; charset="UTF-8"</tt> for PROV-N.</p>
</component>
</permission>
</clause>

<clause id="_response_6" obligation="normative">
<title>Response</title>
<requirement id="req_provenance_prov_response" model="ogc"> <classification><tag>label</tag><value>/req/provenance/prov-response</value></classification><component class="part"><p id="_ecc83e9d-6eef-d592-a0b2-7608331e339c">A successful execution of the operation SHALL be reported as a response with a HTTP status code ‘200’.</p>
</component><component class="part"><p id="_815d65be-9385-0e4a-4be7-1dcb0d5d41c7">Per default, the response SHALL contains a JSON document that conforms to the <link target="https://www.w3.org/submissions/prov-json/schema">schema for PROV-JSON</link>.</p>
</component><component class="part"><p id="_f8fa4c50-f38c-e314-3262-6ef9c84bb780">In case content-negotiation is used, the response MAY contain other representations including PROV-O as JSON-LD, PROV-XML or PROV-N.</p>
</component>
</requirement>
</clause>
</clause>
</clause>
</clause>

<clause id="oas" obligation="normative">
<title>OpenAPI 3.0</title>
<p id="_43998376-6726-a469-9267-0b668f12a092">See <eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2"/>, Clause 9.</p>
</clause>

<clause id="mediatypes" obligation="normative">
<title>Media Types</title>
<p id="_762a5031-b810-5860-ff60-b3707e376443">See <eref type="inline" bibitemid="OAProc-1" citeas="OGC 18-062r2"/>, Clause 13.</p>
</clause>








</sections><annex id="ats" obligation="normative">
<title>Abstract Test Suite</title>
<clause id="_introduction" obligation="normative">
<title>Introduction</title>
<p id="_02eeb7e2-ae07-7102-1d39-d9b06be62432">OGC Web Application Programming Interfaces (APIs) are not Web Services in the traditional sense. Rather, they define the behavior and content of a set of Resources exposed through a Web API. Therefore, an API endpoint may expose resources in addition to those defined by the standard. A test engine must be able to traverse an implementation of the API, identify and validate test points, and ignore resource paths which are not to be tested.</p>

<p id="_2f8f86b6-6e1a-0247-e640-59b0185eda41">The Web API under test can require authorization. Any Executable Test Suite implementing this test suite should implement the following security schemes supported by OpenAPI 3.0: HTTP Authorization schemes “basic” and “bearer”, API keys, and OAuth2 flow “authorizationCode”.</p>
</clause>

<clause id="_conformance_class_job_management" obligation="normative">
<title>Conformance Class Job Management</title>
<requirement id="ats_jm" model="ogc" type="conformanceclass">
<title>Job Management</title><identifier>http://www.opengis.net/spec/ogcapi-processes-4/1.0/conf/job-management</identifier><subject><xref target="rc_job-management">http://www.opengis.net/spec/ogcapi-processes-4/1.0/conf/job-management</xref></subject><classification><tag>Target Type</tag><value>Web API</value></classification><requirement id="_a86d877f-b639-4c33-aaf0-aafbda999bc2" model="ogc" type="verification"> <identifier>/conf/dru/deploy/post-op</identifier></requirement>

</requirement>

<clause id="_create_operation" obligation="normative">
<title>Create operation</title>
<requirement id="ats_jm_deploy_post-op" model="ogc" type="abstracttest"> <identifier>/conf/jm/create/post-op</identifier><classification><tag>target</tag><value><xref target="req_job-management_create_post-op">/req/job-management/create-post-op</xref></value></classification><component class="test-purpose"><p id="_cc03f424-278b-0166-2639-4f077846924c">Validate that the server support HTTP POST operation at the path /jobs/</p>
</component><component class="test-method"><ol id="_8869dbb8-db35-c3f4-fc88-7b4faed37dd4" type="arabic"><li><p id="_e09e3851-35f0-f0ea-17a8-fddcc8354223">Construct a path for the {root}/jobs path.</p>
</li>
<li><p id="_fc72724e-f13a-c143-3f82-e72502e115b7">Issue an HTTP POST request for each path.</p>
</li>
<li><p id="_045cef93-6c04-6d7b-1ea8-aa85e3dfdd92">Validate that the response header does not contain <tt>405 Method not allowed</tt></p>
</li>
</ol>
</component>
</requirement>
</clause>
</clause>
</annex><annex id="_revision_history" obligation="informative">
<title>Revision History</title>
<table id="_1af3e526-b98d-61df-00c5-7c89dc3c51a2" unnumbered="true"><colgroup><col width="12%"/><col width="18%"/><col width="12%"/><col width="12%"/><col width="46%"/></colgroup><thead><tr><th valign="middle" align="left">Date</th>
<th valign="middle" align="left">Release</th>
<th valign="middle" align="left">Editor</th>
<th valign="middle" align="left">Primary clauses modified</th>
<th valign="middle" align="left">Description</th>
</tr></thead>
<tbody><tr><td valign="middle" align="left">2024-08-22</td>
<td valign="middle" align="left">None</td>
<td valign="middle" align="left">Gérald Fenoy</td>
<td valign="middle" align="left">all</td>
<td valign="middle" align="left">Boostraping the document</td>
</tr></tbody>
</table>
</annex><bibliography><references id="_references" normative="true" obligation="informative">
<title>Normative references</title><p id="_307b20e2-9e40-db56-abbf-2822ab2941cc">The following documents are referred to in the text in such a way that some or all of their content constitutes requirements of this document. For dated references, only the edition cited applies. For undated references, the latest edition of the referenced document (including any amendments) applies.</p>

<bibitem id="OAProc-1" type="standard" schema-version="v1.2.9">
  <fetched>2024-11-14</fetched>
  
<title type="title-intro" format="text/plain" language="en" script="Latn">OGC API</title>

  
<title type="title-main" format="text/plain" language="en" script="Latn">Processes</title>

  
<title type="title-part" format="text/plain" language="en" script="Latn">Part 1: Core</title>

  
<title type="main" format="text/plain" language="en" script="Latn">OGC API — Processes — Part 1: Core</title>

  <uri type="src">http://www.opengis.net/doc/IS/ogcapi-processes-1/1.0.0</uri>
  <uri type="obp">https://docs.ogc.org/is/18-062r2/18-062r2.html</uri>
  <docidentifier type="OGC" primary="true">18-062r2</docidentifier>
  <date type="published">
    <on>2021-12-20</on>
  </date>
  <contributor>
    <role type="author"/>
    <person>
      
<name>          <completename>Benjamin Pross</completename>       </name>

    </person>
  </contributor>
  <contributor>
    <role type="author"/>
    <person>
      
<name>          <completename>Panagiotis (Peter) A. Vretanos</completename>       </name>

    </person>
  </contributor>
  <contributor>
    <role type="publisher"/>
    <organization>
      
<name>Open Geospatial Consortium</name>

    </organization>
  </contributor>
  <edition>2</edition>
  <language>en</language>
  <script>Latn</script>
  <abstract format="text/plain" language="en" script="Latn">The OGC API — Processes — Part 1: Core Standard supports the wrapping of computational tasks into executable processes that can be offered by a server through a Web API and be invoked by a client application. The standard specifies a processing interface to communicate over a RESTful protocol using JavaScript Object Notation (JSON) encodings. The standard leverages concepts from the OGC Web Processing Service (WPS) 2.0 Interface Standard but does not require implementation of a WPS.

By way of background and context, in many cases geospatial or location data, including data from sensors, must be processed before the information can be effectively used. The WPS Standard provides a standard interface that simplifies the task of making simple or complex computational geospatial processing services accessible via web services. Such services include well-known processes found in Geographic Information Systems (GIS) as well as specialized processes for spatiotemporal modeling and simulation. While the WPS standard was designed with spatial processing in mind, the standard could also be used to readily insert non-spatial processing tasks into a web services environment.

The OGC API — Processes Standard is a newer and more modern way of programming and interacting with resources over the web while allowing better integration into existing software packages. The OGC API — Processes Standard addresses all of the use cases that were addressed by the WPS Standard, while also leveraging the OpenAPI specification and a resource-oriented approach.

The resources that are provided by a server implementing the OGC API — Processes Standard are listed in Table 1 below and include information about the server, the list of available processes (Process list and Process description), jobs (running processes) and results of process executions.</abstract>
  
</bibitem>
<bibitem id="OAProc-2"><formattedref format="application/x-isodoc+xml">Fenoy, G.: OGC 20-044, <strong>OGC API — Processes — Part 2: Deploy, Replace, Undeploy</strong></formattedref><docidentifier type="OGC">OGC 20-044</docidentifier><docnumber>20-044</docnumber></bibitem>
<bibitem id="OAProc-3"><formattedref format="application/x-isodoc+xml">Jacovella-St-Louis J.: OGC 21-009, <strong>OGC API — Processes — Part 3: Workflows</strong></formattedref><docidentifier type="OGC">OGC 21-009</docidentifier><docnumber>21-009</docnumber></bibitem>
<bibitem id="OAFeat-1" type="standard" schema-version="v1.2.9">
  <fetched>2024-11-14</fetched>
  
<title type="title-intro" format="text/plain" language="en" script="Latn">OGC API</title>

  
<title type="title-main" format="text/plain" language="en" script="Latn">Features</title>

  
<title type="title-part" format="text/plain" language="en" script="Latn">Part 1: Core</title>

  
<title type="main" format="text/plain" language="en" script="Latn">OGC API — Features — Part 1: Core</title>

  <uri type="src">http://www.opengis.net/doc/IS/ogcapi-features-1/1.0.0</uri>
  <uri type="obp">https://docs.ogc.org/is/17-069r3/17-069r3.html</uri>
  <docidentifier type="OGC" primary="true">17-069r3</docidentifier>
  <date type="published">
    <on>2019-10-07</on>
  </date>
  <contributor>
    <role type="author"/>
    <person>
      
<name>          <completename>Clemens Portele</completename>       </name>

    </person>
  </contributor>
  <contributor>
    <role type="author"/>
    <person>
      
<name>          <completename>Panagiotis (Peter) A. Vretanos</completename>       </name>

    </person>
  </contributor>
  <contributor>
    <role type="author"/>
    <person>
      
<name>          <completename>Charles Heazel</completename>       </name>

    </person>
  </contributor>
  <contributor>
    <role type="publisher"/>
    <organization>
      
<name>Open Geospatial Consortium</name>

    </organization>
  </contributor>
  <edition>3</edition>
  <language>en</language>
  <script>Latn</script>
  <abstract format="text/plain" language="en" script="Latn">OGC API standards define modular API building blocks to spatially enable Web APIs in a consistent way. The OpenAPI specification is used to define the API building blocks.

The OGC API family of standards is organized by resource type. This standard specifies the fundamental API building blocks for interacting with features. The spatial data community uses the term ‘feature’ for things in the real world that are of interest.</abstract>
  
</bibitem>
</references><references id="Bibliography" normative="false" obligation="informative">
<title>Bibliography</title><bibitem id="OpenAPI-Spec">
  <formattedref format="application/x-isodoc+xml">OpenAPI Initiative. OpenAPI Specification 3.0.2. Available at:
<link target="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md"/>.</formattedref>
  <docidentifier>OpenAPI Specification 3.0.2</docidentifier>
  <docnumber>3.0.2</docnumber>
</bibitem><bibitem id="Common_Workflow_Language">
  <formattedref format="application/x-isodoc+xml">Peter Amstutz, Michael R. Crusoe, Nebojša Tijanić (editors), Brad Chapman, John Chilton, Michael Heuer, Andrey Kartashov, Dan Leehr, Hervé Ménager, Maya Nedeljkovich, Matt Scales, Stian Soiland-Reyes, Luka Stojanovic (2020): Common Workflow Language, v1.2. Specification, Common Workflow Language working group. <link target="https://w3id.org/cwl/v1.2/"/></formattedref>
  <docidentifier type="metanorma">[2]</docidentifier>
</bibitem><bibitem id="OpenEO_Process_Graphs">
  <formattedref format="application/x-isodoc+xml">OpenEO: OpenEO Developers API Reference / Process Graphs. <link target="https://openeo.org/documentation/1.0/developers/api/reference.html#section/Processes/Process-Graphs"/></formattedref>
  <docidentifier type="metanorma">[3]</docidentifier>
</bibitem>



</references></bibliography>
</ogc-standard>
