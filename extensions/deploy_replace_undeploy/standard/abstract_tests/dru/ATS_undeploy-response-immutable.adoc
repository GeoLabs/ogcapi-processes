[[ats_dru_undeploy-response-immutable]]

[abstract_test]
====
[%metadata]
identifier:: /conf/dru/undeploy-response-immutable
target:: /req/deploy-replace-undeploy/deploy/response-immutable
test-purpose:: Validate that the server return a 403 status code when removing an immutable process
test-method::
+
--
1. From the processes list, pick one process with the `mutable` attribute set to `false` 

2. Send a DELETE request on the /processes/{processId} where {processId} is set to the process selected in previous step

3. Validate that the response contains a document  content was returned with an HTTP status code of 403

4. Validate that the document is conform to the JSON Schema: https://raw.githubusercontent.com/opengeospatial/ogcapi-processes/master/openapi/schemas/common-core/exception.yaml[exception.yaml]

5. Validate that the type of the exception is “http://www.opengis.net/def/exceptions/ogcapi-processes-2/1.0/immutable-process”.
--
====

